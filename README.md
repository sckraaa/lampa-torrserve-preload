# 🧠 TorrServe Smart Preload - Плагин для Lampa

Плагин для умной предзагрузки торрентов прямо из интерфейса Lampa на Smart TV. Решает проблему лагов при просмотре 4K контента на медленном интернете.

## 🌟 Возможности

- **🤖 Умная предзагрузка** - автоматический расчет оптимального размера
- **📺 Интеграция с TV** - работает прямо в интерфейсе Lampa
- **⏳ Реальтайм прогресс** - отображение скорости, времени, пиров
- **🎬 Плавный переход** - от предзагрузки к просмотру
- **⚙️ Гибкие настройки** - автоматический и ручной режимы

## 📱 Как работает

### При клике на торрент появляется выбор:
```
┌─────────────────────────────────────┐
│    🎬 Название фильма               │
│    Что хотите сделать?              │
│                                     │
│  ⏳ Умная предзагрузка              │
│     Загрузить часть фильма          │
│     для плавного просмотра 4K       │
│                                     │
│  ▶️ Смотреть сейчас                 │
│     Начать просмотр немедленно      │
└─────────────────────────────────────┘
```

### Экран настройки предзагрузки:
```
┌─────────────────────────────────────┐
│  🧠 Умная предзагрузка              │
│                                     │
│  💡 Рекомендация AI:                │
│  • Процент: 60% (2.1 ГБ)           │
│  • Скорость: 8.5 МБ/с               │
│  • Время предзагрузки: 4 мин        │
│  • Время просмотра: 180 мин         │
│                                     │
│  🤖 Автоматический расчет ✓         │
│  ⚙️ Ручная настройка               │
│                                     │
│  🚀 Начать предзагрузку             │
└─────────────────────────────────────┘
```

### Экран прогресса:
```
┌─────────────────────────────────────┐
│  ⏳ Предзагрузка                    │
│                                     │
│      ⭕ 45%                         │
│     готово                          │
│                                     │
│  Статус: Загрузка                   │
│  Скорость: 8.2 МБ/с                 │
│  Прогресс: 1.2 ГБ / 2.7 ГБ          │
│  ETA: 3м 20с                        │
│  Пиры: 15 / 23                      │
│                                     │
│  ▶️ Смотреть сейчас  ⏹️ Остановить  │
└─────────────────────────────────────┘
```

## 🚀 Установка

### Способ 1: Автоматическая установка
1. Откройте Lampa на Smart TV
2. Перейдите в **Настройки** → **Плагины** → **Добавить плагин**
3. Введите URL: `http://ваш-сервер.com/torrserve-smart-preload.js`
4. Нажмите **Установить**

### Способ 2: Ручная установка
1. Скопируйте файл `torrserve-smart-preload.js` на веб-сервер
2. В Lampa добавьте плагин по ссылке
3. Или загрузите через USB если поддерживается

### Способ 3: Через Android-приложение TorrServe
1. Поместите файл плагина в папку `/Android/data/ru.yourok.torrserve/files/plugins/`
2. Перезапустите TorrServe
3. Плагин будет доступен в Lampa автоматически

## ⚙️ Настройка

### В Lampa:
1. **Настройки** → **TorrServe Smart Preload**
2. Укажите адрес TorrServe сервера (например: `http://192.168.1.100:8090`)
3. Настройте параметры по вкусу:
   - **Автоматический расчет** - доверить выбор AI
   - **Процент по умолчанию** - для ручного режима
   - **Таймаут** - максимальное время ожидания
   - **Уведомления** - показывать статус

### В TorrServe Android:
1. Убедитесь что TorrServe запущен
2. Проверьте что порт 8090 доступен в локальной сети
3. В настройках разрешите подключения с других устройств

## 🔧 Системные требования

- **Lampa**: любая современная версия
- **TorrServe**: с поддержкой API предзагрузки (MatriX.136+)
- **Сеть**: TorrServe и Lampa должны быть в одной сети
- **Smart TV**: поддержка JavaScript и современного браузера

## 🎯 Как использовать

### Для новичков:
1. Найдите нужный фильм в Lampa
2. При клике выберите **"Умная предзагрузка"**
3. Нажмите **"Начать предзагрузку"** (все настроится автоматически)
4. Дождитесь завершения или нажмите **"Смотреть сейчас"** при 25%+
5. Наслаждайтесь плавным 4K без лагов! 🎬

### Для опытных:
1. Настройте адрес TorrServe в параметрах плагина
2. Выберите ручной режим для точного контроля процента
3. Используйте **"Рекомендация"** для анализа перед запуском
4. Мониторьте прогресс в реальном времени

## 🐛 Устранение проблем

### Плагин не работает:
- Проверьте адрес TorrServe в настройках
- Убедитесь что TorrServe запущен и доступен
- Проверьте что устройства в одной сети

### Медленная предзагрузка:
- Проверьте количество пиров/сидов
- Попробуйте другой торрент с большим количеством сидов
- Проверьте скорость интернета

### Ошибка "Не удалось подключиться":
- Проверьте IP адрес TorrServe (может измениться)
- Убедитесь что порт 8090 не заблокирован
- Перезапустите TorrServe

## 📞 Поддержка

- **GitHub Issues**: сообщайте о багах и предложениях
- **Telegram**: @torrserve_support (неофициальный канал)
- **Forum**: обсуждения на форуме TorrServe

## 🏆 Благодарности

Плагин создан для улучшения опыта использования TorrServe + Lampa связки. Особая благодарность:
- Команде **TorrServe** за отличный сервер
- Разработчикам **Lampa** за удобный интерфейс
- Сообществу за тестирование и обратную связь

---

**💡 Совет**: Рекомендуется предзагружать 30-50% для фильмов и 15-25% для сериалов.
**🎯 Цель**: Плавный просмотр 4K контента даже на медленном интернете!

---
*Версия плагина: 1.0.0*  
*Совместимость: Lampa 1.0+, TorrServe MatriX.136+*
